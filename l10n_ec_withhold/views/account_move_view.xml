<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record id="view_move_form_withhold" model="ir.ui.view">
		<field name="name">account.move.form.withhold</field>
		<field name="model">account.move</field>
		<field name="inherit_id" ref="l10n_ec_edi.view_move_invoice_customization_form"/>
		<field name="arch" type="xml">
			<button name="action_reverse" position="after">
				<button name="add_withhold" string="Add Withhold" type="object"
					groups="account.group_account_invoice"
					attrs="{'invisible':[('l10n_ec_allow_withhold','!=',True)]}"/>
			</button>
            <div class="oe_button_box" position="inside">
                <button type="object" class="oe_stat_button" name="action_view_withholds" icon="fa-list-alt" 
                	attrs="{'invisible': [('l10n_ec_withhold_count', '=', 0)]}">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value"><field name="l10n_ec_withhold_count"/></span>
                        <span class="o_stat_text">Withholds</span>
                    </div>
                </button>
            </div>
            <!-- #JOSE esta sección esta causando que no se pueda hacer facturas de venta por asiento descuadrado
			<xpath expr="//page[@id='aml_tab']" position="after">
				<page id="withhold_tab" string="Withhold Lines" attrs="{'invisible':[('l10n_latam_document_type_code','!=','07')]}">
					<field name="l10n_ec_withhold_origin_ids"/>
					<field name="l10n_ec_withhold_line_ids" nolabel="0" attrs="{'readonly':[('state','!=','draft')]}">
						<tree editable="bottom">
							<field name="l10n_ec_withhold_invoice_id"/>
		                    <field name="tax_line_id" readonly="0"/>
		                    <field name="account_id" required="1"/>
		                    <field name="tax_base_amount"/>
		                    <field name="credit" string="Monto retenido"/>
		                </tree>
					</field>
				</page>
			</xpath>  -->
			
			<!--  
			<xpath expr="//page[@id='invoice_tab']" position="attributes">
				<attribute name="attrs">{'invisible': ['|', ('type','=','entry'), ('l10n_latam_document_type_code','=','07')]}</attribute>
			</xpath>
			-->
			<!-- #TODO JOSE, la pestaña de asiento contable se oculta solo en compras 
			<xpath expr="//page[@id='aml_tab']" position="attributes">
				<attribute name="attrs">{'invisible': [('l10n_latam_document_type_code','=','07')]}</attribute>
			</xpath>
			-->
            <field name="invoice_origin" position="after">
				<field name="l10n_ec_withhold_count" readonly="1" groups="base.group_no_one"/>
				<field name="l10n_ec_withhold_type" readonly="1" groups="base.group_no_one"/>
				<field name="l10n_ec_allow_withhold" readonly="1" groups="base.group_no_one"/>
            </field>
		</field>
	</record>

</odoo>
