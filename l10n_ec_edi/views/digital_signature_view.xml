<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="view_digital_signature_form" model="ir.ui.view">
		<field name="name">view_digital_signature_form</field>
		<field name="model">l10n.ec.digital.signature</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Digital Signature">
				<header>
					<button name="button_aprove" attrs="{'invisible': [('l10n_ec_state', '!=', 'draft')]}" string="Confirmed" type="object"/>
					<button name="button_cancel" attrs="{'invisible': [('l10n_ec_state', '!=', 'confirmed')]}" string="Cancel" type="object"/>
					<button name="button_draft" attrs="{'invisible': [('l10n_ec_state', '!=', 'cancel')]}" string="Send to Draft" type="object"/>
					<field name="l10n_ec_state" widget="statusbar" statusbar_visible="draft,confirmed,cancel"/>
				</header>
				<sheet string="Digital Signature">
					<div>
						<label for="l10n_ec_name" attrs="{'invisible': [('l10n_ec_state','=','draft')]}"/>
						<h1 class="mt0">
							<field name="l10n_ec_name" class="oe_inline" attrs="{'invisible': [('l10n_ec_state', '=', 'draft')]}"/>
						</h1>
					</div>
					<group col="2">
						<group>
							<field name="l10n_ec_company_id" required="1" attrs="{'readonly': [('l10n_ec_state','!=','draft')]}"/>
							<field name="l10n_ec_cert_encripted" required="1" attrs="{'readonly': [('l10n_ec_state','!=','draft')]}"/>
						</group>
						<group>
							<field name="l10n_ec_not_valid_after" attrs="{'invisible': [('l10n_ec_state','=','draft')]}"/>
							<field name="l10n_ec_not_valid_before" attrs="{'invisible': [('l10n_ec_state','=','draft')]}"/>
						</group>
					</group>
				</sheet>
				<div class="oe_chatter">
					<field name="message_follower_ids" widget="mail_followers"/>
					<field name="message_ids" widget="mail_thread"/>
				</div>
			</form>
		</field>
	</record>

	<record id="view_digital_signature_tree" model="ir.ui.view">
		<field name="name">view.digital.signature.tree</field>
		<field name="model">l10n.ec.digital.signature</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Digital Signature">
				<field name="l10n_ec_name"/>
				<field name="l10n_ec_company_id"/>
				<field name="l10n_ec_not_valid_after"/>
				<field name="l10n_ec_not_valid_before"/>
				<field name="l10n_ec_state"/>
			</tree>
		</field>
	</record>

	<record id="view_digital_signature_filter" model="ir.ui.view">
		<field name="name">view.digital.signature.filter</field>
		<field name="model">l10n.ec.digital.signature</field>
		<field name="arch" type="xml">
			<search string="Search Digital Signature">
				<field name="l10n_ec_name" filter_domain="[('l10n_ec_name','ilike',self)]"/>
				<field name="l10n_ec_company_id" filter_domain="[('l10n_ec_company_id','ilike',self)]"/>
				<field name="l10n_ec_not_valid_after" filter_domain="[('l10n_ec_not_valid_after','ilike',self)]"/>
				<field name="l10n_ec_not_valid_before" filter_domain="[('l10n_ec_not_valid_before','ilike',self)]"/>
				<filter string="Draft" name="draft" domain="[('l10n_ec_state','=','draft')]"/>
				<filter string="Confirmed" name="confirmed" domain="[('l10n_ec_state','=','confirmed')]"/>
				<filter string="Cancel" name="cancel" domain="[('l10n_ec_state','=','cancel')]"/>
				<filter string="Expired" name="expired" domain="[('l10n_ec_state','=','expired')]"/>
				<group expand="0" string="Group By">
					<filter string="Company" name="l10n_ec_company_id" context="{'group_by':'l10n_ec_company_id'}"/>
					<filter string="Status" name="l10n_ec_state" context="{'group_by':'l10n_ec_state'}"/>
				</group>
			</search>
		</field>
	</record>

	<record id="view_digital_signature_kanban" model="ir.ui.view">
		<field name="name">view.digital.signature.kanban</field>
		<field name="model">l10n.ec.digital.signature</field>
		<field name="arch" type="xml">
			<kanban class="o_kanban_mobile">
				<field name="l10n_ec_name"/>
				<field name="l10n_ec_company_id"/>
				<field name="l10n_ec_state"/>
				<templates>
					<t t-name="kanban-box">
						<div t-attf-class="oe_kanban_card oe_kanban_global_click">
							<div class="row">
								<div class="col-xs-6">
									<strong>
										<span t-if="record.l10n_ec_state">
											<t t-esc="record.l10n_ec_state.value"/>
										</span>
									</strong>
								</div>
								<div class="col-xs-6 pull-right text-right">
									<strong>
										<field name="l10n_ec_company_id"/>
									</strong>
								</div>
							</div>
						</div>
					</t>
				</templates>
			</kanban>
		</field>
	</record>

	<record id="action_digital_signature" model="ir.actions.act_window"> 
		<field name="name">Digital Signatures</field>
		<field name="res_model">l10n.ec.digital.signature</field>
		<field name="view_mode">tree,form,kanban</field>
		<field name="view_id" ref="view_digital_signature_tree"/>
		<field name="search_view_id" ref="view_digital_signature_filter"/>
	</record>

	<menuitem id="menu_digital_signature" action="action_digital_signature" parent="action_sri_menu" sequence="20"/>

</odoo>
